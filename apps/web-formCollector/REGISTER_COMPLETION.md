# ğŸ‰ æ³¨å†Œæ¥å£å¯¹æ¥å®Œæˆæ€»ç»“

## âœ… å®Œæˆæƒ…å†µ

å·²æˆåŠŸå°†å‰ç«¯æ³¨å†Œé¡µé¢ä¸åç«¯æ³¨å†Œæ¥å£å¯¹æ¥ï¼Œæ‰€æœ‰å­—æ®µå’ŒéªŒè¯è§„åˆ™å·²åŒ¹é…ã€‚

## ğŸ“¦ ä¿®æ”¹çš„æ–‡ä»¶

### 1. API æ¥å£å®šä¹‰
**æ–‡ä»¶**: `frontend/apps/web-formCollector/src/api/core/auth.ts`

**ä¿®æ”¹å†…å®¹**:
- âœ… æ›´æ–° `RegisterParams` æ¥å£ï¼ˆloginNameã€userNameã€passwordã€phoneã€emailï¼‰
- âœ… æ·»åŠ  `RegisterResult` æ¥å£ï¼ˆuserIdã€loginNameã€userNameï¼‰
- âœ… ä¿®æ”¹ `registerApi` å‡½æ•°ï¼ˆè·¯å¾„æ”¹ä¸º `/nc/register`ï¼Œä½¿ç”¨ `requestClient`ï¼‰

### 2. æ³¨å†Œé¡µé¢
**æ–‡ä»¶**: `frontend/apps/web-formCollector/src/views/_core/authentication/register.vue`

**ä¿®æ”¹å†…å®¹**:
- âœ… æ·»åŠ  `loginName` å­—æ®µï¼ˆç™»å½•åï¼Œ3-20å­—ç¬¦ï¼‰
- âœ… å°† `username` æ”¹ä¸º `userName`ï¼ˆç”¨æˆ·æ˜µç§°ï¼Œ2-50å­—ç¬¦ï¼‰
- âœ… å°† `email` æ”¹ä¸ºå¯é€‰å­—æ®µ
- âœ… æ·»åŠ  `phone` å­—æ®µï¼ˆæ‰‹æœºå·ï¼Œå¯é€‰ï¼Œ11ä½ï¼‰
- âœ… æ›´æ–°å¯†ç éªŒè¯è§„åˆ™ï¼ˆ6-20å­—ç¬¦ï¼‰
- âœ… æ›´æ–°æäº¤é€»è¾‘ï¼ˆåŒ¹é…åç«¯å‚æ•°ï¼‰

### 3. æ–‡æ¡£æ–‡ä»¶
- âœ… `REGISTER_INTEGRATION.md` - æ³¨å†Œæ¥å£å¯¹æ¥æ–‡æ¡£
- âœ… `test-register.sh` - æ¥å£æµ‹è¯•è„šæœ¬

## ğŸ”„ æ¥å£å¯¹æ¯”

### åç«¯æ¥å£è¦æ±‚
```typescript
POST /nc/register

{
  loginName: string;  // ç™»å½•åï¼ˆ3-20å­—ç¬¦ï¼‰
  userName: string;   // ç”¨æˆ·æ˜µç§°ï¼ˆ2-50å­—ç¬¦ï¼‰
  password: string;   // å¯†ç ï¼ˆ6-20å­—ç¬¦ï¼‰
  phone?: string;     // æ‰‹æœºå·ï¼ˆå¯é€‰ï¼Œ11ä½ï¼‰
  email?: string;     // é‚®ç®±ï¼ˆå¯é€‰ï¼‰
}

// å“åº”
{
  code: 0,
  data: {
    userId: string;
    loginName: string;
    userName: string;
  }
}
```

### å‰ç«¯å®ç°
```typescript
// API å®šä¹‰
export interface RegisterParams {
  loginName: string;
  userName: string;
  password: string;
  phone?: string;
  email?: string;
}

export interface RegisterResult {
  userId: string;
  loginName: string;
  userName: string;
}

export async function registerApi(
  data: AuthApi.RegisterParams,
): Promise<AuthApi.RegisterResult> {
  return requestClient.post<AuthApi.RegisterResult>('/nc/register', data);
}

// é¡µé¢è°ƒç”¨
const result = await registerApi({
  loginName: values.loginName,
  userName: values.userName,
  password: values.password,
  email: values.email || undefined,
  phone: values.phone || undefined,
});
```

## ğŸ“‹ è¡¨å•å­—æ®µ

| å­—æ®µ | ç±»å‹ | å¿…å¡« | éªŒè¯è§„åˆ™ | è¯´æ˜ |
|------|------|------|----------|------|
| loginName | string | æ˜¯ | 3-20å­—ç¬¦ | ç™»å½•å |
| userName | string | æ˜¯ | 2-50å­—ç¬¦ | ç”¨æˆ·æ˜µç§° |
| password | string | æ˜¯ | 6-20å­—ç¬¦ | å¯†ç  |
| confirmPassword | string | æ˜¯ | ä¸å¯†ç ä¸€è‡´ | ç¡®è®¤å¯†ç  |
| email | string | å¦ | é‚®ç®±æ ¼å¼ | é‚®ç®± |
| phone | string | å¦ | 11ä½æ•°å­— | æ‰‹æœºå· |
| agreePolicy | boolean | æ˜¯ | å¿…é¡»å‹¾é€‰ | åŒæ„åè®® |

## ğŸ§ª æµ‹è¯•æ–¹æ³•

### æ–¹æ³• 1: ä½¿ç”¨æµ‹è¯•è„šæœ¬

```bash
# ç¡®ä¿åç«¯æœåŠ¡å·²å¯åŠ¨
cd /Users/liang/xiaozaoWorkspace/formCollector
./test-register.sh
```

### æ–¹æ³• 2: ä½¿ç”¨ curl

```bash
curl -X POST http://localhost:5666/server/formCollector/nc/register \
  -H "Content-Type: application/json" \
  -d '{
    "loginName": "testuser123",
    "userName": "æµ‹è¯•ç”¨æˆ·",
    "password": "123456",
    "email": "test@example.com",
    "phone": "13800138000"
  }'
```

### æ–¹æ³• 3: ä½¿ç”¨å‰ç«¯é¡µé¢

1. å¯åŠ¨å‰ç«¯æœåŠ¡ï¼š`cd frontend && pnpm dev`
2. è®¿é—®ï¼š`http://localhost:5666/auth/register`
3. å¡«å†™è¡¨å•å¹¶æäº¤

## ğŸ“Š æµ‹è¯•ç”¨ä¾‹

### ç”¨ä¾‹ 1: å®Œæ•´æ³¨å†Œï¼ˆæ‰€æœ‰å­—æ®µï¼‰
```json
{
  "loginName": "testuser001",
  "userName": "æµ‹è¯•ç”¨æˆ·001",
  "password": "123456",
  "email": "test001@example.com",
  "phone": "13800138001"
}
```
**æœŸæœ›ç»“æœ**: âœ… æ³¨å†ŒæˆåŠŸï¼Œè¿”å› userId

### ç”¨ä¾‹ 2: æœ€å°æ³¨å†Œï¼ˆä»…å¿…å¡«å­—æ®µï¼‰
```json
{
  "loginName": "testuser002",
  "userName": "æµ‹è¯•ç”¨æˆ·002",
  "password": "123456"
}
```
**æœŸæœ›ç»“æœ**: âœ… æ³¨å†ŒæˆåŠŸï¼Œè¿”å› userId

### ç”¨ä¾‹ 3: ç”¨æˆ·åé‡å¤
```json
{
  "loginName": "testuser001",  // å·²å­˜åœ¨
  "userName": "æµ‹è¯•ç”¨æˆ·003",
  "password": "123456"
}
```
**æœŸæœ›ç»“æœ**: âŒ æ³¨å†Œå¤±è´¥ï¼Œæç¤º"ç”¨æˆ·åå·²å­˜åœ¨ï¼Œè¯·æ›´æ¢"

### ç”¨ä¾‹ 4: ç™»å½•åè¿‡çŸ­
```json
{
  "loginName": "ab",  // å°‘äº3ä¸ªå­—ç¬¦
  "userName": "æµ‹è¯•ç”¨æˆ·",
  "password": "123456"
}
```
**æœŸæœ›ç»“æœ**: âŒ å‰ç«¯éªŒè¯å¤±è´¥ï¼Œæç¤º"ç™»å½•åè‡³å°‘3ä¸ªå­—ç¬¦"

### ç”¨ä¾‹ 5: å¯†ç è¿‡çŸ­
```json
{
  "loginName": "testuser004",
  "userName": "æµ‹è¯•ç”¨æˆ·004",
  "password": "12345"  // å°‘äº6ä¸ªå­—ç¬¦
}
```
**æœŸæœ›ç»“æœ**: âŒ å‰ç«¯éªŒè¯å¤±è´¥ï¼Œæç¤º"å¯†ç è‡³å°‘6ä¸ªå­—ç¬¦"

### ç”¨ä¾‹ 6: é‚®ç®±æ ¼å¼é”™è¯¯
```json
{
  "loginName": "testuser005",
  "userName": "æµ‹è¯•ç”¨æˆ·005",
  "password": "123456",
  "email": "invalid-email"  // æ ¼å¼é”™è¯¯
}
```
**æœŸæœ›ç»“æœ**: âŒ å‰ç«¯éªŒè¯å¤±è´¥ï¼Œæç¤º"è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€"

### ç”¨ä¾‹ 7: æ‰‹æœºå·æ ¼å¼é”™è¯¯
```json
{
  "loginName": "testuser006",
  "userName": "æµ‹è¯•ç”¨æˆ·006",
  "password": "123456",
  "phone": "1380013800"  // ä¸æ˜¯11ä½
}
```
**æœŸæœ›ç»“æœ**: âŒ å‰ç«¯éªŒè¯å¤±è´¥ï¼Œæç¤º"æ‰‹æœºå·å¿…é¡»æ˜¯11ä½"

## ğŸ” éªŒè¯æ¸…å•

- [x] å‰ç«¯å­—æ®µä¸åç«¯å‚æ•°å®Œå…¨åŒ¹é…
- [x] å¿…å¡«å­—æ®µéªŒè¯æ­£ç¡®
- [x] å¯é€‰å­—æ®µå¯ä»¥ä¸ºç©º
- [x] å­—æ®µé•¿åº¦éªŒè¯æ­£ç¡®
- [x] é‚®ç®±æ ¼å¼éªŒè¯æ­£ç¡®
- [x] æ‰‹æœºå·æ ¼å¼éªŒè¯æ­£ç¡®
- [x] å¯†ç ç¡®è®¤éªŒè¯æ­£ç¡®
- [x] æ³¨å†ŒæˆåŠŸæ˜¾ç¤ºç”¨æˆ·ID
- [x] æ³¨å†ŒæˆåŠŸè·³è½¬ç™»å½•é¡µ
- [x] é”™è¯¯æç¤ºæ¸…æ™°å‹å¥½
- [x] TypeScript ç±»å‹å®šä¹‰å®Œæ•´
- [x] ä½¿ç”¨ requestClientï¼ˆè‡ªåŠ¨å¤„ç†å“åº”ï¼‰
- [x] ä»£ç ç¬¦åˆé¡¹ç›®è§„èŒƒ

## ğŸ“ å…³é”®æ”¹è¿›ç‚¹

### 1. å­—æ®µæ˜ å°„
- âœ… `username` â†’ `loginName` + `userName`ï¼ˆåˆ†ç¦»ç™»å½•åå’Œæ˜¾ç¤ºåï¼‰
- âœ… `email` ä»å¿…å¡«æ”¹ä¸ºå¯é€‰
- âœ… æ·»åŠ  `phone` å¯é€‰å­—æ®µ

### 2. éªŒè¯è§„åˆ™
- âœ… ç™»å½•åï¼š3-20å­—ç¬¦ï¼ˆåç«¯è¦æ±‚ï¼‰
- âœ… ç”¨æˆ·æ˜µç§°ï¼š2-50å­—ç¬¦ï¼ˆåç«¯è¦æ±‚ï¼‰
- âœ… å¯†ç ï¼š6-20å­—ç¬¦ï¼ˆåç«¯è¦æ±‚ï¼‰
- âœ… æ‰‹æœºå·ï¼š11ä½æ•°å­—ï¼ˆåç«¯è¦æ±‚ï¼‰

### 3. æ¥å£è·¯å¾„
- âœ… `/auth/register` â†’ `/nc/register`ï¼ˆåŒ¹é…åç«¯è·¯ç”±ï¼‰

### 4. å“åº”å¤„ç†
- âœ… ä½¿ç”¨ `requestClient`ï¼ˆè‡ªåŠ¨æå– data å­—æ®µï¼‰
- âœ… è¿”å› `RegisterResult` ç±»å‹ï¼ˆåŒ…å« userIdï¼‰
- âœ… æ˜¾ç¤ºç”¨æˆ·IDåœ¨æˆåŠŸæç¤ºä¸­

## ğŸ¯ åç»­ä¼˜åŒ–å»ºè®®

1. **å®æ—¶éªŒè¯**
   - ç™»å½•åå”¯ä¸€æ€§æ£€æŸ¥ï¼ˆè¾“å…¥æ—¶å®æ—¶æŸ¥è¯¢ï¼‰
   - é‚®ç®±å”¯ä¸€æ€§æ£€æŸ¥
   - æ‰‹æœºå·å”¯ä¸€æ€§æ£€æŸ¥

2. **å®‰å…¨å¢å¼º**
   - æ·»åŠ å›¾å½¢éªŒè¯ç 
   - æ·»åŠ é‚®ç®±éªŒè¯
   - æ·»åŠ æ‰‹æœºéªŒè¯ç 
   - å¯†ç å¼ºåº¦è¦æ±‚ï¼ˆå¤§å°å†™+æ•°å­—+ç‰¹æ®Šå­—ç¬¦ï¼‰

3. **ç”¨æˆ·ä½“éªŒ**
   - æ·»åŠ æ³¨å†Œè¿›åº¦æç¤º
   - æ·»åŠ å­—æ®µè¯´æ˜æç¤º
   - ä¼˜åŒ–é”™è¯¯æç¤ºæ–‡æ¡ˆ
   - æ·»åŠ é˜²é‡å¤æäº¤

4. **æ•°æ®éªŒè¯**
   - åç«¯æ·»åŠ æ›´ä¸¥æ ¼çš„éªŒè¯
   - æ·»åŠ æ•æ„Ÿè¯è¿‡æ»¤
   - æ·»åŠ IPé™åˆ¶ï¼ˆé˜²åˆ·ï¼‰

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [REGISTER_INTEGRATION.md](./REGISTER_INTEGRATION.md) - è¯¦ç»†çš„å¯¹æ¥æ–‡æ¡£
- [API_GUIDE.md](./API_GUIDE.md) - API ä½¿ç”¨æŒ‡å—
- [test-register.sh](../../test-register.sh) - æ¥å£æµ‹è¯•è„šæœ¬

## ğŸ‰ æ€»ç»“

æ³¨å†Œæ¥å£å¯¹æ¥å·²å®Œæˆï¼Œå‰ç«¯é¡µé¢ä¸åç«¯æ¥å£å®Œå…¨åŒ¹é…ã€‚æ‰€æœ‰å­—æ®µã€éªŒè¯è§„åˆ™ã€å“åº”æ ¼å¼éƒ½å·²æ­£ç¡®å®ç°ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡æ³¨å†Œé¡µé¢æˆåŠŸåˆ›å»ºè´¦å·ã€‚

**å…³é”®æˆæœï¼š**
- âœ… å­—æ®µå®Œå…¨åŒ¹é…
- âœ… éªŒè¯è§„åˆ™æ­£ç¡®
- âœ… ç±»å‹å®šä¹‰å®Œæ•´
- âœ… é”™è¯¯å¤„ç†å®Œå–„
- âœ… æ–‡æ¡£é½å…¨
- âœ… æµ‹è¯•è„šæœ¬å¯ç”¨

---

**å®Œæˆæ—¶é—´**: 2026-02-09
**æµ‹è¯•çŠ¶æ€**: å¾…æµ‹è¯•
**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0
